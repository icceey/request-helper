# RequestHelper 使用说明

## 🎉 功能已完成

RequestHelper 是一个功能强大的Chrome浏览器开发工具插件，可以在后台静默捕获HTTP请求。

## ✨ 核心功能

### 1. 静默抓包
- ✅ 无需打开DevTools即可捕获网络请求
- ✅ 支持捕获请求头（Request Headers）
- ✅ 支持捕获响应头（Response Headers）
- ✅ 支持捕获请求体（Request Body - FormData、Raw）
- ✅ 自动记录请求时间、耗时、状态码等信息

### 2. URL过滤
- ✅ 配置需要捕获的URL模式
- ✅ 支持通配符（*）匹配
- ✅ 支持多个URL模式
- ✅ 自动过滤Chrome内部请求

### 3. 数据管理
- ✅ 本地存储（Chrome Storage API）
- ✅ 可配置最大存储数量（10-10000条）
- ✅ 支持清空所有数据
- ✅ 支持导出为JSON文件

### 4. 用户界面
- ✅ Popup快速控制面板
- ✅ Options配置页面
- ✅ Viewer请求查看器
- ✅ 实时统计信息

## 📖 使用指南

### 安装插件

1. 构建项目：
```bash
npm run build
```

2. 在Chrome中加载：
   - 打开 `chrome://extensions/`
   - 启用"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择 `dist` 目录

### 基本使用

#### 1. 启动捕获
- 点击工具栏中的RequestHelper图标
- 点击"启动捕获"按钮
- 插件开始在后台捕获网络请求

#### 2. 配置过滤规则
- 点击Popup中的"设置"按钮
- 在"URL过滤规则"中配置需要捕获的URL模式
- 例如：
  ```
  https://api.example.com/*
  *://*/api/*
  https://www.example.com/data/*
  ```
- 点击"保存设置"

#### 3. 查看请求
- 点击Popup中的"查看请求"按钮
- 在请求列表中选择要查看的请求
- 查看详细的请求和响应信息

#### 4. 搜索和过滤
- 在查看器页面使用搜索框搜索URL
- 使用方法过滤器筛选特定HTTP方法的请求

#### 5. 导出数据
- 在查看器页面点击"导出"按钮
- 将所有捕获的请求保存为JSON文件

## ⚙️ 配置选项

### 基础设置
- **自动启动捕获**：插件启动时自动开始捕获

### URL过滤规则
支持的模式格式：
- `*://*/*` - 匹配所有URL
- `https://api.example.com/*` - 匹配特定域名下所有路径
- `*://*/api/*` - 匹配任意域名下的/api/路径
- `https://www.example.com/data/*` - 匹配特定路径

### 存储设置
- **最大存储请求数**：10-10000（默认1000）
- 超出限制时自动删除最早的请求

## 📊 查看器功能

### 请求列表
- 显示所有捕获的请求
- 按时间倒序排列
- 显示方法、URL、状态码、时间

### 请求详情
选择请求后可查看：
- **基本信息**：URL、方法、状态码、类型、时间、耗时、IP
- **请求头**：完整的请求头信息
- **请求体**：POST/PUT等请求的请求体
- **响应头**：完整的响应头信息
- **错误信息**：如果请求失败，显示错误信息

### 搜索和过滤
- **URL搜索**：输入关键字搜索URL
- **方法过滤**：按HTTP方法筛选（GET、POST、PUT、DELETE、PATCH）

## 🔍 调试技巧

### 查看Service Worker日志
1. 打开 `chrome://extensions/`
2. 找到RequestHelper
3. 点击"Service Worker"查看后台日志

### 查看Popup日志
1. 右键点击扩展图标
2. 选择"检查弹出内容"

### 常见问题

**Q: 没有捕获到请求？**
- 检查是否点击了"启动捕获"
- 检查URL过滤规则是否正确
- 查看Service Worker日志是否有错误

**Q: 请求列表为空？**
- 确认已经捕获了一些请求
- 检查搜索和过滤条件
- 尝试清空过滤器

**Q: 看不到响应体？**
- 这是已知限制，webRequest API无法直接获取响应体
- 后续版本会通过content script实现

**Q: 插件影响性能？**
- 插件使用最小化的性能开销
- 可以通过URL过滤减少捕获的请求数量
- 及时清理旧数据

## 🚀 高级使用

### URL模式示例

```
# 捕获所有API请求
*://*/api/*
*://*/v1/*
*://*/v2/*

# 捕获特定域名
https://api.github.com/*
https://api.example.com/*

# 捕获特定文件类型
*://*/*.json
*://*/*.xml

# 组合使用
https://example.com/api/*
https://example.com/data/*
```

### 数据导出格式

导出的JSON文件包含：
```json
[
  {
    "id": "请求ID",
    "url": "请求URL",
    "method": "请求方法",
    "statusCode": "状态码",
    "timestamp": "时间戳",
    "duration": "耗时（毫秒）",
    "requestHeaders": {},
    "responseHeaders": {},
    "requestBody": {},
    ...
  }
]
```

## 📝 注意事项

1. **隐私保护**：
   - 所有数据存储在本地
   - 不会上传到任何服务器
   - 请注意不要捕获敏感信息

2. **存储限制**：
   - Chrome Storage有配额限制
   - 建议定期清理旧数据
   - 可以通过导出保存重要数据

3. **性能考虑**：
   - 过多的请求会影响性能
   - 建议设置合理的URL过滤规则
   - 适当调整最大存储数量

## 🎯 最佳实践

1. **精确的过滤规则**：只捕获需要的请求
2. **定期清理数据**：避免存储过多数据
3. **导出重要数据**：保存需要分析的请求
4. **合理的存储限制**：根据需求调整最大请求数

---

享受使用 RequestHelper！
