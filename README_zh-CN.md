# RequestHelper

[English](./README.md) | 中文

一个强大的 Chrome Manifest V3 扩展程序，用于静默捕获和分析网络请求。它使用**双层拦截架构**来绕过 webRequest API 的限制，捕获完整的请求/响应体。

> **🤖 注意：本项目完全由 AI 生成**  
> 本仓库中的所有文件，包括此 README、文档、源代码和配置文件，均由 AI 助手生成。

## ✨ 特性

- **完整的请求/响应捕获**
  - 捕获完整的请求和响应体（包括 XMLHttpRequest 和 Fetch API）
  - 自动解析 JSON、HTML、XML 和文本格式
  - 大型响应体保护（默认 5MB 限制）

- **双层拦截架构**
  - 页面上下文拦截器，可完全访问数据
  - Content Script 桥接，用于 Chrome 扩展通信
  - 绕过 Manifest V3 webRequest API 限制

- **强大的规则系统**
  - **捕获规则**：通过 URL 正则表达式模式选择性捕获请求
  - **阻断规则**：使用 declarativeNetRequest API 阻断匹配特定模式的请求
  - **修改规则**：实时修改请求/响应
    - 修改请求体（JSON 合并/替换、文本替换）
    - 修改 Query 参数（添加/更新/删除）
    - 修改请求头（添加/更新/删除）
    - 修改响应体（JSON 合并/替换、文本替换）
    - 修改响应头（添加/更新/删除）
  - 基于优先级的规则匹配（从上到下执行）
  - 按需启用/禁用规则

- **高级过滤和搜索**
  - 多范围搜索（URL、请求体、响应体）
  - 按 HTTP 方法过滤（GET、POST、PUT、DELETE 等）
  - 按状态码过滤（2xx、3xx、4xx、5xx）
  - 按捕获规则过滤（查看每个请求匹配的规则）
  - 慢请求过滤器（超过 1 秒的请求）
  - 排除静态资源（图片、CSS、JS、字体）

- **丰富的请求分析**
  - 查看请求/响应头
  - 检查请求/响应体
  - 跟踪请求时间和持续时间
  - JSON 语法高亮，支持格式化/原始视图
  - 显示每个请求匹配的捕获规则
  - 显示已修改请求的修改详情

- **友好的用户界面**
  - 带实时状态的快速控制面板
  - 带高级搜索和过滤的详细请求查看器
  - 带规则管理的综合设置页面
  - 拖放式规则优先级调整
  - 多语言支持（English、简体中文）

## 🚀 安装

### 从源码安装

1. 克隆此仓库：

   ```bash
   git clone https://github.com/yourusername/request-helper.git
   cd request-helper
   ```

2. 构建扩展：

   ```bash
   npm run build
   ```

3. 在 Chrome 中加载：
   - 打开 `chrome://extensions/`
   - 启用"开发者模式"
   - 点击"加载已解压的扩展程序"
   - 选择 `dist/` 文件夹

## 📖 使用方法

### 快速开始

1. 点击 Chrome 工具栏中的 RequestHelper 图标
2. 点击"开始捕获"开始捕获请求
3. 浏览任何网站或触发网络请求
4. 点击"查看请求"检查捕获的数据
5. 完成后点击"停止捕获"

### 配置捕获规则

在**设置**页面中，切换到**捕获规则**选项卡可以：

1. **添加规则**：点击"添加规则"创建新的捕获/阻断/修改规则
2. **配置规则类型**：选择：
   - **URL 正则**：通过 URL 模式匹配请求（例如：`https://api\.example\.com/.*`）
3. **设置动作**：
   - **捕获**：捕获并记录匹配的请求
   - **阻断**：阻止匹配的请求发送
   - **修改**：实时修改请求/响应数据
4. **管理优先级**：使用 ↑↓ 按钮调整规则顺序（越靠上优先级越高）
5. **切换规则**：可以启用/禁用规则而不删除它们

**注意**：当没有定义规则时，**不会捕获任何请求**。

### 修改请求/响应

RequestHelper 支持强大的请求/响应修改功能：

- **请求体修改**：
  - JSON 合并：将新字段合并到现有 JSON 中
  - JSON 替换：用新 JSON 完全替换请求体
  - 文本替换：查找并替换文本模式

- **Query 参数修改**：
  - 添加或更新 query 参数
  - 删除特定 query 参数

- **请求头修改**：
  - 添加/更新请求头或响应头
  - 删除特定请求头

- **响应体修改**：
  - 与请求体相同的 JSON 合并/替换/文本替换功能
  - 在 API 响应到达网页之前修改它们

### 过滤和搜索请求

**请求查看器**提供高级过滤功能：

- **多范围搜索**：在 URL、请求体或响应体中搜索
- **方法过滤器**：按 HTTP 方法过滤（GET、POST、PUT、DELETE 等）
- **状态码过滤器**：按状态码范围过滤（2xx、3xx、4xx、5xx）
- **规则过滤器**：按匹配的捕获规则过滤请求
- **慢请求过滤器**：仅显示耗时超过 1 秒的请求
- **清空全部**：快速清空所有已捕获的请求

### 查看请求详情

**请求查看器**提供：

- 详细的请求/响应头和体
- 带格式化/原始切换的 JSON 语法高亮
- 匹配的捕获规则显示
- 已修改请求的修改详情显示
- 请求时间和持续时间
- 一键复制请求头/请求体
- 请求来源指示器（webRequest、content-script 或 merged）

## 🤝 贡献

欢迎贡献！请随时提交 Pull Request。

> **⚠️ 重要：本项目完全由 AI 编写，我们要求所有贡献也必须使用 AI 生成的代码。**

### 指南

- **所有代码必须由 AI 生成**（如 GitHub Copilot、ChatGPT、Claude 等）
- 在 Pull Request 中说明使用的 AI 工具
- 遵循现有的代码风格和模式
- 更改后运行 `npm run build`
- 使用测试页面进行手动测试
- 更新相关文档

### 为什么只接受 AI 生成的代码？

本项目是一个 AI 代码生成能力的实验和展示。为了保持项目的一致性和实验性质，我们要求所有贡献都使用 AI 辅助工具生成。这有助于：

- 展示 AI 在实际项目开发中的能力
- 保持代码风格的一致性
- 作为 AI 辅助开发的参考案例

## 📄 许可证

MIT License - 详见 LICENSE 文件

## 🙏 致谢

- 使用现代 Chrome Extension Manifest V3 API 和网络请求拦截的最佳实践构建
- 测试由 [JSONPlaceholder](https://jsonplaceholder.typicode.com/) 提供支持 - 一个免费的虚拟 REST API，用于测试和原型开发

## 📮 支持

如果您遇到任何问题或有疑问，请在 GitHub 上[提交 issue](https://github.com/yourusername/request-helper/issues)。

> **注意**：由于本项目是完全由 AI 驱动的项目，所有 issue 将由 AI 助手处理。虽然我们努力解决所有问题，但不保证一定能够解决。感谢您的理解与耐心。

---

**注意**：此扩展需要 Chrome 88+ 才能完全支持 Manifest V3。
