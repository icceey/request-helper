# RequestHelper

English | [中文](./README_zh-CN.md)

A powerful Chrome Manifest V3 extension for silent network request capturing and analysis. It uses a **dual-layer interception architecture** to bypass webRequest API limitations and capture complete request/response bodies.

> **🤖 Note: This project is entirely AI-generated**  
> All files in this repository, including this README, documentation, source code, and configurations, are generated by AI assistants.

## ✨ Features

- **Complete Request/Response Capture**
  - Captures full request and response bodies (including XMLHttpRequest and Fetch API)
  - Automatic parsing of JSON, HTML, XML, and text formats
  - Protection against large response bodies (default 5MB limit)

- **Dual-Layer Interception Architecture**
  - Page context interceptor for full data access
  - Content script bridge for Chrome extension communication
  - Bypasses Manifest V3 webRequest API limitations

- **Powerful Rules System**
  - **Capture Rules**: Define URL regex patterns to selectively capture requests
  - **Block Rules**: Block requests matching specific patterns using declarativeNetRequest API
  - **Modify Rules**: Modify request/response in real-time
    - Modify request body (JSON merge/replace, text replace)
    - Modify query parameters (add/update/delete)
    - Modify request headers (add/update/delete)
    - Modify response body (JSON merge/replace, text replace)
    - Modify response headers (add/update/delete)
  - Priority-based rule matching (top-to-bottom execution order)
  - Enable/disable rules on-demand

- **Advanced Filtering & Search**
  - Multi-scope search (URL, request body, response body)
  - Filter by HTTP methods (GET, POST, PUT, DELETE, etc.)
  - Filter by status codes (2xx, 3xx, 4xx, 5xx)
  - Filter by capture rules (see which rule matched each request)
  - Slow request filter (requests over 1 second)
  - Exclude static resources (images, CSS, JS, fonts)

- **Rich Request Analysis**
  - View request/response headers
  - Inspect request/response bodies
  - Track request timing and duration
  - JSON syntax highlighting with formatted/raw views
  - Display matched capture rule for each request
  - Show modification details for modified requests

- **User-Friendly Interface**
  - Quick control popup with real-time status
  - Detailed request viewer with advanced search and filters
  - Comprehensive settings page with rules management
  - Drag-and-drop rule priority adjustment
  - Multi-language support (English, 简体中文)

## 🚀 Installation

### From Source

1. Clone this repository:

   ```bash
   git clone https://github.com/yourusername/request-helper.git
   cd request-helper
   ```

2. Build the extension:

   ```bash
   npm run build
   ```

3. Load in Chrome:
   - Open `chrome://extensions/`
   - Enable "Developer mode"
   - Click "Load unpacked"
   - Select the `dist/` folder

## 📖 Usage

### Quick Start

1. Click the RequestHelper icon in Chrome toolbar
2. Click "Start Capture" to begin capturing requests
3. Browse any website or trigger network requests
4. Click "View Requests" to inspect captured data
5. Click "Stop Capture" when done

### Configuring Capture Rules

In the **Settings** page, navigate to the **Capture Rules** tab to:

1. **Add Rules**: Click "Add Rule" to create new capture/block/modify rules
2. **Configure Rule Type**: Choose from:
   - **URL Regex**: Match requests by URL pattern (e.g., `https://api\.example\.com/.*`)
3. **Set Actions**:
   - **Capture**: Capture and record matching requests
   - **Block**: Block matching requests from being sent
   - **Modify**: Modify request/response data in real-time
4. **Manage Priority**: Use ↑↓ buttons to adjust rule order (higher rules have priority)
5. **Toggle Rules**: Enable/disable rules without deleting them

**Note**: When no rules are defined, **no requests will be captured**.

### Modifying Requests/Responses

RequestHelper supports powerful request/response modification:

- **Request Body Modification**:
  - JSON Merge: Merge new fields into existing JSON
  - JSON Replace: Completely replace request body with new JSON
  - Text Replace: Find and replace text patterns

- **Query Parameter Modification**:
  - Add or update query parameters
  - Delete specific query parameters

- **Header Modification**:
  - Add/update request or response headers
  - Delete specific headers

- **Response Body Modification**:
  - Same JSON merge/replace/text replace capabilities as request body
  - Modify API responses before they reach the web page

### Filtering and Searching Requests

The **Request Viewer** provides advanced filtering:

- **Multi-Scope Search**: Search across URL, request body, or response body
- **Method Filter**: Filter by HTTP methods (GET, POST, PUT, DELETE, etc.)
- **Status Code Filter**: Filter by status code ranges (2xx, 3xx, 4xx, 5xx)
- **Rule Filter**: Filter by which capture rule matched the request
- **Slow Request Filter**: Show only requests that took over 1 second
- **Clear All**: Quick button to clear all captured requests

### Viewing Request Details

The **Request Viewer** provides:

- Detailed request/response headers and bodies
- JSON syntax highlighting with formatted/raw toggle
- Matched capture rule display
- Modification details for modified requests
- Request timing and duration
- One-click copy for headers/bodies
- Request source indicator (webRequest, content-script, or merged)

## 🤝 Contributing

Contributions are welcome! Please feel free to submit a Pull Request.

> **⚠️ Important: This project is entirely AI-written, and we require all contributions to use AI-generated code as well.**

### Guidelines

- **All code must be generated by AI** (such as GitHub Copilot, ChatGPT, Claude, etc.)
- Specify the AI tool used in your Pull Request
- Follow existing code style and patterns
- Run `npm run build` after making changes
- Test manually using test pages
- Update relevant documentation

### Why AI-generated code only?

This project is an experiment and showcase of AI code generation capabilities. To maintain consistency and the experimental nature of the project, we require all contributions to be generated using AI-assisted tools. This helps to:

- Demonstrate AI capabilities in real-world project development
- Maintain code style consistency
- Serve as a reference case for AI-assisted development

## 📄 License

MIT License - see LICENSE file for details

## 🙏 Acknowledgments

- Built with modern Chrome Extension Manifest V3 APIs and best practices for network request interception
- Testing powered by [JSONPlaceholder](https://jsonplaceholder.typicode.com/) - a free fake REST API for testing and prototyping

## 📮 Support

If you encounter any issues or have questions, please [open an issue](https://github.com/yourusername/request-helper/issues) on GitHub.

> **Note**: As this is an entirely AI-driven project, issues will be processed by AI assistants. While we strive to address all concerns, resolution is not guaranteed. We appreciate your understanding and patience.

---

**Note**: This extension requires Chrome 88+ for full Manifest V3 support.
