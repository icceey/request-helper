# 状态码筛选功能

## 功能概述
为请求查看器增加了状态码筛选功能，支持多选筛选，可根据已捕获的请求列表动态生成可选状态码，每一项显示请求数量。

## 实现细节

### 1. HTML 结构 (viewer.html)
- 在工具栏中添加了状态码筛选按钮和下拉菜单
- 下拉菜单包含：
  - 标题栏（带"清除"按钮）
  - 动态生成的复选框列表

### 2. JavaScript 逻辑 (viewer.js)
- **状态管理**：使用 `Set` 存储选中的状态码 (`selectedStatusCodes`)
- **动态生成选项**：`updateStatusFilter()` 函数统计所有请求的状态码及数量，并生成复选框列表
- **筛选逻辑**：在 `handleFilter()` 中添加状态码筛选条件
  - 如果未选择任何状态码（`selectedStatusCodes.size === 0`），则不进行过滤
  - 如果选择了状态码，只显示匹配的请求
- **交互功能**：
  - 点击按钮显示/隐藏下拉菜单
  - 复选框选择/取消选择状态码
  - "清除"按钮一键清空所有选择
  - 点击外部区域自动关闭下拉菜单
  - 按钮文本动态显示已选数量

### 3. CSS 样式 (viewer.css)
- 下拉菜单样式（带阴影和边框）
- 复选框列表样式（悬停效果）
- 状态码标签颜色（2xx绿色、3xx黄色、4xx橙色、5xx红色）
- 激活状态的按钮高亮
- 粘性头部（滚动时固定）

## 主要特性

✅ **多选支持**：可同时选择多个状态码进行筛选
✅ **动态生成**：根据实际捕获的请求动态生成可选项
✅ **数量显示**：每个状态码显示对应的请求数量
✅ **不选即不过滤**：未选择任何状态码时显示所有请求
✅ **视觉反馈**：选中状态码时按钮高亮并显示数量
✅ **快速清除**：一键清空所有选择
✅ **自动排序**：状态码按数值升序排列
✅ **颜色编码**：状态码按类别显示不同颜色

## 使用方法

1. 打开请求查看器页面
2. 点击"状态码 ▼"按钮打开下拉菜单
3. 勾选需要筛选的状态码（可多选）
4. 列表会自动根据选择的状态码过滤
5. 点击"清除"按钮取消所有筛选
6. 点击外部区域或再次点击按钮关闭菜单

## 技术实现

### 核心函数
- `updateStatusFilter()`: 统计状态码并生成筛选器UI
- `handleStatusFilterChange()`: 处理复选框变化
- `updateStatusButtonText()`: 更新按钮显示文本
- `clearStatusFilter()`: 清除所有选择
- `toggleStatusDropdown()`: 切换下拉菜单显示状态

### 数据流
1. 加载请求 → 统计状态码 → 生成UI
2. 用户选择 → 更新Set → 触发筛选 → 刷新列表
3. 新请求到来 → 重新统计 → 更新UI（保持已选状态）
